<script src="scripts/CPUMonitor.js"></script>

<header class="w3-container" style="padding-top:22px">
    <h2><b><i class="fa fa-refresh"></i> Monitor</b></h2>
</header>
<!--Usage statistic-->
<div class="w3-container w3-margin">
    <p>
        <button id ="123" class="w3-button w3-black w3-round" onclick="getInfo()">search</button>
    </p>
    <h5>Server monitor</h5>
    <p>CPU</p>
    <div class="w3-grey">
        <div class="w3-container w3-center w3-padding-small w3-green" style="width:36%">36%</div>
    </div>

    <p>Memory</p>
    <div class="w3-grey">
        <div class="w3-container w3-center w3-padding-small w3-orange" style="width:57%">57%</div>
    </div>

    <p>Disk</p>
    <div class="w3-grey">
        <div class="w3-container w3-center w3-padding-small w3-red" style="width:30%">30%</div>
    </div>

    <p>Network</p>
    <div class="w3-grey">
        <div class="w3-container w3-center w3-padding-small w3-yellow" style="width:6%">6%</div>
    </div>
    <div class="w3-container w3-margin"  id="CPUChart">

    </div>
    <div class="w3-container w3-margin"  id="MemoryChart">

    </div>
    <div class="w3-container w3-margin"  id="DiskChart">

    </div>
</div>

<script>
    function getInfo() {

        var xhr = new XMLHttpRequest();

        xhr.open('GET', 'getInfo', true);

        xhr.onreadystatechange = function () {
            if(xhr.status == 200) {
//                console.log(xhr.);
                console.log(xhr.responseText);
                var info = JSON.parse(xhr.responseText, function(key, value) {
                    if (key == 'datatime') return new Date(value);
                    return value;
                });
                console.log(info.datatime);
                console.log(info.cpu);
                console.log(info.disk);
                console.log(info.memory);
//                var button = document.getElementById("123");
//                button.innerHTML = "qwe";
            } else {
                console.log("error");
            }

        };

        xhr.send(null);
    }
</script>